@tailwind base;
@tailwind components;
@tailwind utilities;

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fade-in-up 0.3s ease-out;
}

/* Print styles */
@media print {
  /* Hide header controls when printing */
  .print-hide {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    width: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    opacity: 0 !important;
    clip: rect(0, 0, 0, 0) !important;
    clip-path: inset(50%) !important;
    overflow: hidden !important;
  }

  /* Avoid page breaks inside these elements - disabled to allow first tier to start on first page */
  .print-avoid-break {
    page-break-inside: auto;
    break-inside: auto;
  }

  /* Prefer to avoid breaks before these elements */
  .print-avoid-break-before {
    page-break-before: auto;
    break-before: auto;
  }

  /* Force page break before element if needed */
  .print-break-before {
    page-break-before: always;
    break-before: always;
  }

  /* Remove backgrounds for better printing */
  html,
  body {
    background: white !important;
    padding: 0 !important;
    margin: 0 !important;
    height: auto !important;
    min-height: 0 !important;
    max-height: none !important;
  }

  /* Remove outer padding */
  body > div,
  #root {
    padding: 0 !important;
    margin: 0 !important;
    height: auto !important;
    min-height: 0 !important;
    max-height: none !important;
  }

  /* Force all containers to collapse to content */
  body > div,
  body > div > * {
    height: auto !important;
    min-height: 0 !important;
    max-height: none !important;
  }

  /* Remove all background colors - black and white only */
  * {
    background: white !important;
    background-color: white !important;
    color: black !important;
  }

  /* Make everything static position except QR code which needs relative */
  *:not(.print-qr-code) {
    position: static !important;
  }

  .print-qr-code {
    position: relative !important;
  }

  /* Adjust margins for print */
  @page {
    margin: 0.75in;
    size: letter;
  }

  /* Prevent content from creating extra pages */
  html {
    overflow: visible !important;
    height: auto !important;
  }

  /* Chrome-specific print fixes */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    -webkit-transform: none !important;
    transform: none !important;
    will-change: auto !important;
  }

  /* Force body to contain only visible content */
  body::after,
  html::after {
    content: none !important;
    display: none !important;
  }

  /* Print-specific header styling */
  .print-header {
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0 !important;
    margin-bottom: 1rem !important;
    background: white !important;
  }

  .print-main-heading {
    font-size: 1.75rem !important;
    font-weight: 700 !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
  }

  /* QR code styling for print */
  .print\:block {
    display: block !important;
  }

  .hidden.print\:block {
    display: block !important;
  }

  .print-qr-code {
    display: block !important;
    margin-top: 2rem !important;
    text-align: right !important;
    position: relative !important;
    float: right !important;
  }

  .print-qr-code svg {
    display: block !important;
  }

  .print-qr-code p {
    margin-top: 0.25rem !important;
    text-align: center !important;
    width: 80px !important;
  }

  /* Print-specific tier styling */
  .print-tier {
    border: none !important;
    background: white !important;
    padding: 0 !important;
    margin: 0 !important;
    margin-bottom: 1rem !important;
    min-height: 0 !important;
    height: auto !important;
    max-height: none !important;
    page-break-inside: auto !important;
    break-inside: auto !important;
  }

  .print-tier > * {
    background: white !important;
    border: none !important;
  }

  .print-tier-heading {
    font-size: 1.1rem !important;
    font-weight: 700 !important;
    margin: 0 !important;
    margin-bottom: 0.5rem !important;
    padding: 0 !important;
    padding-bottom: 0.25rem !important;
    border-bottom: 2px solid #333 !important;
    background: white !important;
  }

  /* Print-specific value list styling */
  .print-value-list {
    list-style: none !important;
    padding: 0 !important;
    margin: 0 !important;
    display: block !important;
    gap: 0 !important;
  }

  .print-value-item {
    display: list-item !important;
    margin-left: 1.5rem !important;
    margin-bottom: 0.35rem !important;
    line-height: 1.4 !important;
    page-break-inside: avoid;
    break-inside: avoid;
    background: none !important;
    border: none !important;
    padding: 0 !important;
    box-shadow: none !important;
    min-height: auto !important;
  }

  .print-value-item::before {
    content: "• " !important;
    margin-left: -1rem !important;
    font-weight: bold !important;
  }

  .print-value-name {
    font-weight: 600 !important;
    display: inline !important;
  }

  .print-value-description {
    color: #555 !important;
    font-style: italic !important;
    display: inline !important;
    font-size: 0.9em !important;
  }

  .print-value-description::before {
    content: " — " !important;
  }

  /* Hide category sidebar on print */
  .print-hide-sidebar {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    max-height: 0 !important;
    min-height: 0 !important;
    width: 0 !important;
    max-width: 0 !important;
    min-width: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    opacity: 0 !important;
    clip: rect(0, 0, 0, 0) !important;
    clip-path: inset(50%) !important;
    overflow: hidden !important;
  }

  /* Make main content full width on print */
  .print-full-width {
    grid-column: 1 / -1 !important;
  }

  /* Remove min-height constraints - nuclear option */
  *, *::before, *::after {
    min-height: 0 !important;
    max-height: none !important;
    height: auto !important;
  }

  /* Compact main container */
  .min-h-screen {
    min-height: 0 !important;
    height: auto !important;
  }

  /* Remove extra gaps in grid */
  .grid {
    gap: 0 !important;
    display: block !important;
    height: auto !important;
  }

  /* Compact space-y */
  .space-y-4 > * + * {
    margin-top: 0.75rem !important;
  }

  /* Remove all flex display in print */
  .flex,
  .flex-col {
    display: block !important;
  }

  /* Specifically target the flex-col container */
  .flex.flex-col,
  .h-full.flex.flex-col,
  .max-w-7xl.h-full.flex.flex-col {
    display: block !important;
    height: auto !important;
    min-height: 0 !important;
    max-height: none !important;
    flex: none !important;
  }

  /* Target the outer h-screen container */
  .h-screen.overflow-hidden {
    height: auto !important;
    min-height: 0 !important;
    overflow: visible !important;
  }

  /* Remove flex constraints */
  .flex-1,
  .flex-shrink-0 {
    flex: none !important;
    height: auto !important;
    min-height: 0 !important;
    max-height: none !important;
  }

  .min-h-0 {
    min-height: 0 !important;
    height: auto !important;
    max-height: none !important;
  }

  /* Force grid containers to auto height */
  .grid.flex-1 {
    height: auto !important;
    min-height: 0 !important;
    flex: none !important;
  }

  /* Ensure 4-column grid becomes single column on print */
  .grid-cols-4 {
    grid-template-columns: 1fr !important;
  }

  /* Remove fixed heights that cause whitespace */
  .h-screen,
  .h-full {
    height: auto !important;
    max-height: none !important;
    min-height: 0 !important;
    display: block !important;
  }

  /* Ensure containers take minimal space */
  .max-w-7xl {
    max-width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Remove rounded corners and shadows */
  .rounded-lg,
  .shadow-lg {
    border-radius: 0 !important;
    box-shadow: none !important;
  }

  /* Make sure the header takes minimal space */
  .print-header > * {
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Allow grid and its children to break */
  .grid,
  .space-y-4,
  .lg\:col-span-2,
  .print-full-width {
    page-break-inside: auto !important;
    break-inside: auto !important;
  }

  /* Force all overflow to visible - prevents clipping */
  *,
  *::before,
  *::after {
    overflow: visible !important;
    overflow-x: visible !important;
    overflow-y: visible !important;
    transform: none !important;
  }

  body,
  html,
  #root {
    overflow: visible !important;
    overflow-x: visible !important;
    overflow-y: visible !important;
  }

  /* Remove overflow hidden which can cause issues */
  .overflow-hidden,
  .overflow-y-auto,
  .overflow-visible {
    overflow: visible !important;
  }

  /* Force everything to display: block for Firefox */
  .min-h-screen,
  .max-w-7xl,
  .grid,
  .space-y-4,
  .lg\:col-span-2,
  .print-full-width,
  .print-header,
  .print-tier {
    display: block !important;
    position: static !important;
    float: none !important;
    height: auto !important;
    max-height: none !important;
  }

  /* Hide DragOverlay which might cause phantom pages */
  [class*="DragOverlay"] {
    display: none !important;
    visibility: hidden !important;
  }


  /* Ensure the outer containers don't create space */
  body > div {
    height: auto !important;
    min-height: 0 !important;
    max-height: none !important;
  }

  /* Ensure everything can break in Firefox */
  body, body * {
    page-break-inside: auto !important;
    break-inside: auto !important;
    orphans: 1 !important;
    widows: 1 !important;
  }

  /* Only value items should avoid breaking */
  .print-value-item {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  /* Force content to end - no page breaks after last tier */
  .print-tier:last-of-type {
    page-break-after: avoid !important;
    break-after: avoid !important;
  }

  /* Prevent orphan page breaks */
  body {
    page-break-after: avoid !important;
    break-after: avoid !important;
  }

  /* Cap body height to actual content */
  body {
    max-height: fit-content !important;
    height: fit-content !important;
  }
}
